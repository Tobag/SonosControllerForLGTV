"use strict";

function recalculateGroupVolume() {
  var _this = this;

  var zone = this.system.zones.find(function (zone) {
    return zone.uuid === _this.uuid;
  });

  var totalVolume = zone.members.map(function (player) {
    return player.state.volume;
  }).reduce(function (prev, current) {
    return prev + current;
  });

  this.groupState.volume = Math.round(totalVolume / zone.members.length);
}

module.exports = recalculateGroupVolume;
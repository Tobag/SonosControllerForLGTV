'use strict';

var expect = require('chai').expect;
var sinon = require('sinon');
var proxyquire = require('proxyquire').noCallThru();
var fs = require('fs');
var path = require('path');
require('chai').use(require('sinon-chai'));

describe('Should require all files in folder', function () {
  var requireDir = void 0;
  var mockObject = void 0;
  var readdirSync = void 0;

  before(function () {

    mockObject = {
      mockMethod: sinon.spy()
    };

    requireDir = proxyquire('../../../lib/helpers/require-dir.js', { fs: fs });
    requireDir(path.join(__dirname, '/../../data/requireables'), function (module) {
      module(mockObject);
    });
  });

  it('Has called mockMethod from subject', function () {
    expect(mockObject.mockMethod).calledTwice;
    expect(mockObject.mockMethod.firstCall.args[0]).equal(1);
    expect(mockObject.mockMethod.secondCall.args[0]).equal(2);
  });
});